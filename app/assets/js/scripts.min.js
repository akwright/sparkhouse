/*!
 * sparkhouse
 * we craft high quality ios apps
 * 
 * @author sparkhouse
 * @version 1.0.0
 * Copyright 2015. MIT licensed.
 */
!function(t,e,i){"use strict";function r(i){if(n=e.documentElement,o=e.body,j(),at=this,i=i||{},ft=i.constants||{},i.easing)for(var r in i.easing)Y[r]=i.easing[r];bt=i.edgeStrategy||"set",ct={beforerender:i.beforerender,render:i.render,keyframe:i.keyframe},ut=i.forceHeight!==!1,ut&&(Bt=i.scale||1),dt=i.mobileDeceleration||T,pt=i.smoothScrolling!==!1,gt=i.smoothScrollingDuration||L,St={targetTop:at.getScrollTop()},_t=(i.mobileCheck||function(){return/Android|iPhone|iPad|iPod|BlackBerry/i.test(navigator.userAgent||navigator.vendor||t.opera)})(),_t?(ht=e.getElementById(i.skrollrBody||x),ht&&st(),X(),Et(n,[v,F],[b])):Et(n,[v,y],[b]),at.refresh(),wt(t,"resize orientationchange",function(){var t=n.clientWidth,e=n.clientHeight;(e!==Ot||t!==qt)&&(Ot=e,qt=t,Wt=!0)});var s=K();return function a(){Z(),Ft=s(a)}(),at}var n,o,s={get:function(){return at},init:function(t){return at||new r(t)},VERSION:"0.6.30"},a=Object.prototype.hasOwnProperty,l=t.Math,h=t.getComputedStyle,c="touchstart",u="touchmove",f="touchcancel",d="touchend",m="skrollable",p=m+"-before",g=m+"-between",S=m+"-after",v="skrollr",b="no-"+v,y=v+"-desktop",F=v+"-mobile",w="linear",A=1e3,T=.004,x="skrollr-body",L=200,R="start",M="end",k="center",E="bottom",V="___skrollable_id",C=/^(?:input|textarea|button|select)$/i,N=/^\s+|\s+$/g,P=/^data(?:-(_\w+))?(?:-?(-?\d*\.?\d+p?))?(?:-?(start|end|top|center|bottom))?(?:-?(top|center|bottom))?$/,D=/\s*(@?[\w\-\[\]]+)\s*:\s*(.+?)\s*(?:;|$)/gi,B=/^(@?[a-z\-]+)\[(\w+)\]$/,I=/-([a-z0-9_])/g,G=function(t,e){return e.toUpperCase()},H=/[\-+]?[\d]*\.?[\d]+/g,q=/\{\?\}/g,O=/rgba?\(\s*-?\d+\s*,\s*-?\d+\s*,\s*-?\d+/g,W=/[a-z\-]+-gradient/g,z="",_="",j=function(){var t=/^(?:O|Moz|webkit|ms)|(?:-(?:o|moz|webkit|ms)-)/;if(h){var e=h(o,null);for(var i in e)if(z=i.match(t)||+i==i&&e[i].match(t))break;if(!z)return void(z=_="");z=z[0],"-"===z.slice(0,1)?(_=z,z={"-webkit-":"webkit","-moz-":"Moz","-ms-":"ms","-o-":"O"}[z]):_="-"+z.toLowerCase()+"-"}},K=function(){var e=t.requestAnimationFrame||t[z.toLowerCase()+"RequestAnimationFrame"],i=Nt();return(_t||!e)&&(e=function(e){var r=Nt()-i,n=l.max(0,1e3/60-r);return t.setTimeout(function(){i=Nt(),e()},n)}),e},U=function(){var e=t.cancelAnimationFrame||t[z.toLowerCase()+"CancelAnimationFrame"];return(_t||!e)&&(e=function(e){return t.clearTimeout(e)}),e},Y={begin:function(){return 0},end:function(){return 1},linear:function(t){return t},quadratic:function(t){return t*t},cubic:function(t){return t*t*t},swing:function(t){return-l.cos(t*l.PI)/2+.5},sqrt:function(t){return l.sqrt(t)},outCubic:function(t){return l.pow(t-1,3)+1},bounce:function(t){var e;if(.5083>=t)e=3;else if(.8489>=t)e=9;else if(.96208>=t)e=27;else{if(!(.99981>=t))return 1;e=91}return 1-l.abs(3*l.cos(t*e*1.028)/e)}};r.prototype.refresh=function(t){var r,n,o=!1;for(t===i?(o=!0,lt=[],zt=0,t=e.getElementsByTagName("*")):t.length===i&&(t=[t]),r=0,n=t.length;n>r;r++){var s=t[r],a=s,l=[],h=pt,c=bt,u=!1;if(o&&V in s&&delete s[V],s.attributes){for(var f=0,d=s.attributes.length;d>f;f++){var p=s.attributes[f];if("data-anchor-target"!==p.name)if("data-smooth-scrolling"!==p.name)if("data-edge-strategy"!==p.name)if("data-emit-events"!==p.name){var g=p.name.match(P);if(null!==g){var S={props:p.value,element:s,eventType:p.name.replace(I,G)};l.push(S);var v=g[1];v&&(S.constant=v.substr(1));var b=g[2];/p$/.test(b)?(S.isPercentage=!0,S.offset=(0|b.slice(0,-1))/100):S.offset=0|b;var y=g[3],F=g[4]||y;y&&y!==R&&y!==M?(S.mode="relative",S.anchors=[y,F]):(S.mode="absolute",y===M?S.isEnd=!0:S.isPercentage||(S.offset=S.offset*Bt))}}else u=!0;else c=p.value;else h="off"!==p.value;else if(a=e.querySelector(p.value),null===a)throw"Unable to find anchor target "+p.value}if(l.length){var w,A,T;!o&&V in s?(T=s[V],w=lt[T].styleAttr,A=lt[T].classAttr):(T=s[V]=zt++,w=s.style.cssText,A=kt(s)),lt[T]={element:s,styleAttr:w,classAttr:A,anchorTarget:a,keyFrames:l,smoothScrolling:h,edgeStrategy:c,emitEvents:u,lastFrameIndex:-1},Et(s,[m],[])}}}for(Lt(),r=0,n=t.length;n>r;r++){var x=lt[t[r][V]];x!==i&&(Q(x),et(x))}return at},r.prototype.relativeToAbsolute=function(t,e,i){var r=n.clientHeight,o=t.getBoundingClientRect(),s=o.top,a=o.bottom-o.top;return e===E?s-=r:e===k&&(s-=r/2),i===E?s+=a:i===k&&(s+=a/2),s+=at.getScrollTop(),s+.5|0},r.prototype.animateTo=function(t,e){e=e||{};var r=Nt(),n=at.getScrollTop(),o=e.duration===i?A:e.duration;return mt={startTop:n,topDiff:t-n,targetTop:t,duration:o,startTime:r,endTime:r+o,easing:Y[e.easing||w],done:e.done},mt.topDiff||(mt.done&&mt.done.call(at,!1),mt=i),at},r.prototype.stopAnimateTo=function(){mt&&mt.done&&mt.done.call(at,!0),mt=i},r.prototype.isAnimatingTo=function(){return!!mt},r.prototype.isMobile=function(){return _t},r.prototype.setScrollTop=function(e,i){return vt=i===!0,_t?jt=l.min(l.max(e,0),Dt):t.scrollTo(0,e),at},r.prototype.getScrollTop=function(){return _t?jt:t.pageYOffset||n.scrollTop||o.scrollTop||0},r.prototype.getMaxScrollTop=function(){return Dt},r.prototype.on=function(t,e){return ct[t]=e,at},r.prototype.off=function(t){return delete ct[t],at},r.prototype.destroy=function(){var t=U();t(Ft),Tt(),Et(n,[b],[v,y,F]);for(var e=0,r=lt.length;r>e;e++)ot(lt[e].element);n.style.overflow=o.style.overflow="",n.style.height=o.style.height="",ht&&s.setStyle(ht,"transform","none"),at=i,ht=i,ct=i,ut=i,Dt=0,Bt=1,ft=i,dt=i,It="down",Gt=-1,qt=0,Ot=0,Wt=!1,mt=i,pt=i,gt=i,St=i,vt=i,zt=0,bt=i,_t=!1,jt=0,yt=i};var X=function(){var r,s,a,h,m,p,g,S,v,b,y,F;wt(n,[c,u,f,d].join(" "),function(t){var n=t.changedTouches[0];for(h=t.target;3===h.nodeType;)h=h.parentNode;switch(m=n.clientY,p=n.clientX,b=t.timeStamp,C.test(h.tagName)||t.preventDefault(),t.type){case c:r&&r.blur(),at.stopAnimateTo(),r=h,s=g=m,a=p,v=b;break;case u:C.test(h.tagName)&&e.activeElement!==h&&t.preventDefault(),S=m-g,F=b-y,at.setScrollTop(jt-S,!0),g=m,y=b;break;default:case f:case d:var o=s-m,w=a-p,A=w*w+o*o;if(49>A){if(!C.test(r.tagName)){r.focus();var T=e.createEvent("MouseEvents");T.initMouseEvent("click",!0,!0,t.view,1,n.screenX,n.screenY,n.clientX,n.clientY,t.ctrlKey,t.altKey,t.shiftKey,t.metaKey,0,null),r.dispatchEvent(T)}return}r=i;var x=S/F;x=l.max(l.min(x,3),-3);var L=l.abs(x/dt),R=x*L+.5*dt*L*L,M=at.getScrollTop()-R,k=0;M>Dt?(k=(Dt-M)/R,M=Dt):0>M&&(k=-M/R,M=0),L*=1-k,at.animateTo(M+.5|0,{easing:"outCubic",duration:L})}}),t.scrollTo(0,0),n.style.overflow=o.style.overflow="hidden"},$=function(){var t,e,i,r,o,s,a,h,c,u,f,d=n.clientHeight,m=Rt();for(h=0,c=lt.length;c>h;h++)for(t=lt[h],e=t.element,i=t.anchorTarget,r=t.keyFrames,o=0,s=r.length;s>o;o++)a=r[o],u=a.offset,f=m[a.constant]||0,a.frame=u,a.isPercentage&&(u*=d,a.frame=u),"relative"===a.mode&&(ot(e),a.frame=at.relativeToAbsolute(i,a.anchors[0],a.anchors[1])-u,ot(e,!0)),a.frame+=f,ut&&!a.isEnd&&a.frame>Dt&&(Dt=a.frame);for(Dt=l.max(Dt,Mt()),h=0,c=lt.length;c>h;h++){for(t=lt[h],r=t.keyFrames,o=0,s=r.length;s>o;o++)a=r[o],f=m[a.constant]||0,a.isEnd&&(a.frame=Dt-a.offset+f);t.keyFrames.sort(Pt)}},J=function(t,e){for(var i=0,r=lt.length;r>i;i++){var n,o,l=lt[i],h=l.element,c=l.smoothScrolling?t:e,u=l.keyFrames,f=u.length,d=u[0],v=u[u.length-1],b=c<d.frame,y=c>v.frame,F=b?d:v,w=l.emitEvents,A=l.lastFrameIndex;if(b||y){if(b&&-1===l.edge||y&&1===l.edge)continue;switch(b?(Et(h,[p],[S,g]),w&&A>-1&&(xt(h,d.eventType,It),l.lastFrameIndex=-1)):(Et(h,[S],[p,g]),w&&f>A&&(xt(h,v.eventType,It),l.lastFrameIndex=f)),l.edge=b?-1:1,l.edgeStrategy){case"reset":ot(h);continue;case"ease":c=F.frame;break;default:case"set":var T=F.props;for(n in T)a.call(T,n)&&(o=nt(T[n].value),0===n.indexOf("@")?h.setAttribute(n.substr(1),o):s.setStyle(h,n,o));continue}}else 0!==l.edge&&(Et(h,[m,g],[p,S]),l.edge=0);for(var x=0;f-1>x;x++)if(c>=u[x].frame&&c<=u[x+1].frame){var L=u[x],R=u[x+1];for(n in L.props)if(a.call(L.props,n)){var M=(c-L.frame)/(R.frame-L.frame);M=L.props[n].easing(M),o=rt(L.props[n].value,R.props[n].value,M),o=nt(o),0===n.indexOf("@")?h.setAttribute(n.substr(1),o):s.setStyle(h,n,o)}w&&A!==x&&("down"===It?xt(h,L.eventType,It):xt(h,R.eventType,It),l.lastFrameIndex=x);break}}},Z=function(){Wt&&(Wt=!1,Lt());var t,e,r=at.getScrollTop(),n=Nt();if(mt)n>=mt.endTime?(r=mt.targetTop,t=mt.done,mt=i):(e=mt.easing((n-mt.startTime)/mt.duration),r=mt.startTop+e*mt.topDiff|0),at.setScrollTop(r,!0);else if(!vt){var o=St.targetTop-r;o&&(St={startTop:Gt,topDiff:r-Gt,targetTop:r,startTime:Ht,endTime:Ht+gt}),n<=St.endTime&&(e=Y.sqrt((n-St.startTime)/gt),r=St.startTop+e*St.topDiff|0)}if(vt||Gt!==r){It=r>Gt?"down":Gt>r?"up":It,vt=!1;var a={curTop:r,lastTop:Gt,maxTop:Dt,direction:It},l=ct.beforerender&&ct.beforerender.call(at,a);l!==!1&&(J(r,at.getScrollTop()),_t&&ht&&s.setStyle(ht,"transform","translate(0, "+-jt+"px) "+yt),Gt=r,ct.render&&ct.render.call(at,a)),t&&t.call(at,!1)}Ht=n},Q=function(t){for(var e=0,i=t.keyFrames.length;i>e;e++){for(var r,n,o,s,a=t.keyFrames[e],l={};null!==(s=D.exec(a.props));)o=s[1],n=s[2],r=o.match(B),null!==r?(o=r[1],r=r[2]):r=w,n=n.indexOf("!")?tt(n):[n.slice(1)],l[o]={value:n,easing:Y[r]};a.props=l}},tt=function(t){var e=[];return O.lastIndex=0,t=t.replace(O,function(t){return t.replace(H,function(t){return t/255*100+"%"})}),_&&(W.lastIndex=0,t=t.replace(W,function(t){return _+t})),t=t.replace(H,function(t){return e.push(+t),"{?}"}),e.unshift(t),e},et=function(t){var e,i,r={};for(e=0,i=t.keyFrames.length;i>e;e++)it(t.keyFrames[e],r);for(r={},e=t.keyFrames.length-1;e>=0;e--)it(t.keyFrames[e],r)},it=function(t,e){var i;for(i in e)a.call(t.props,i)||(t.props[i]=e[i]);for(i in t.props)e[i]=t.props[i]},rt=function(t,e,i){var r,n=t.length;if(n!==e.length)throw"Can't interpolate between \""+t[0]+'" and "'+e[0]+'"';var o=[t[0]];for(r=1;n>r;r++)o[r]=t[r]+(e[r]-t[r])*i;return o},nt=function(t){var e=1;return q.lastIndex=0,t[0].replace(q,function(){return t[e++]})},ot=function(t,e){t=[].concat(t);for(var i,r,n=0,o=t.length;o>n;n++)r=t[n],i=lt[r[V]],i&&(e?(r.style.cssText=i.dirtyStyleAttr,Et(r,i.dirtyClassAttr)):(i.dirtyStyleAttr=r.style.cssText,i.dirtyClassAttr=kt(r),r.style.cssText=i.styleAttr,Et(r,i.classAttr)))},st=function(){yt="translateZ(0)",s.setStyle(ht,"transform",yt);var t=h(ht),e=t.getPropertyValue("transform"),i=t.getPropertyValue(_+"transform"),r=e&&"none"!==e||i&&"none"!==i;r||(yt="")};s.setStyle=function(t,e,i){var r=t.style;if(e=e.replace(I,G).replace("-",""),"zIndex"===e)isNaN(i)?r[e]=i:r[e]=""+(0|i);else if("float"===e)r.styleFloat=r.cssFloat=i;else try{z&&(r[z+e.slice(0,1).toUpperCase()+e.slice(1)]=i),r[e]=i}catch(n){}};var at,lt,ht,ct,ut,ft,dt,mt,pt,gt,St,vt,bt,yt,Ft,wt=s.addEvent=function(e,i,r){var n=function(e){return e=e||t.event,e.target||(e.target=e.srcElement),e.preventDefault||(e.preventDefault=function(){e.returnValue=!1,e.defaultPrevented=!0}),r.call(this,e)};i=i.split(" ");for(var o,s=0,a=i.length;a>s;s++)o=i[s],e.addEventListener?e.addEventListener(o,r,!1):e.attachEvent("on"+o,n),Kt.push({element:e,name:o,listener:r})},At=s.removeEvent=function(t,e,i){e=e.split(" ");for(var r=0,n=e.length;n>r;r++)t.removeEventListener?t.removeEventListener(e[r],i,!1):t.detachEvent("on"+e[r],i)},Tt=function(){for(var t,e=0,i=Kt.length;i>e;e++)t=Kt[e],At(t.element,t.name,t.listener);Kt=[]},xt=function(t,e,i){ct.keyframe&&ct.keyframe.call(at,t,e,i)},Lt=function(){var t=at.getScrollTop();Dt=0,ut&&!_t&&(o.style.height=""),$(),ut&&!_t&&(o.style.height=Dt+n.clientHeight+"px"),_t?at.setScrollTop(l.min(at.getScrollTop(),Dt)):at.setScrollTop(t,!0),vt=!0},Rt=function(){var t,e,i=n.clientHeight,r={};for(t in ft)e=ft[t],"function"==typeof e?e=e.call(at):/p$/.test(e)&&(e=e.slice(0,-1)/100*i),r[t]=e;return r},Mt=function(){var t,e=0;return ht&&(e=l.max(ht.offsetHeight,ht.scrollHeight)),t=l.max(e,o.scrollHeight,o.offsetHeight,n.scrollHeight,n.offsetHeight,n.clientHeight),t-n.clientHeight},kt=function(e){var i="className";return t.SVGElement&&e instanceof t.SVGElement&&(e=e[i],i="baseVal"),e[i]},Et=function(e,r,n){var o="className";if(t.SVGElement&&e instanceof t.SVGElement&&(e=e[o],o="baseVal"),n===i)return void(e[o]=r);for(var s=e[o],a=0,l=n.length;l>a;a++)s=Ct(s).replace(Ct(n[a])," ");s=Vt(s);for(var h=0,c=r.length;c>h;h++)-1===Ct(s).indexOf(Ct(r[h]))&&(s+=" "+r[h]);e[o]=Vt(s)},Vt=function(t){return t.replace(N,"")},Ct=function(t){return" "+t+" "},Nt=Date.now||function(){return+new Date},Pt=function(t,e){return t.frame-e.frame},Dt=0,Bt=1,It="down",Gt=-1,Ht=Nt(),qt=0,Ot=0,Wt=!1,zt=0,_t=!1,jt=0,Kt=[];"function"==typeof define&&define.amd?define([],function(){return s}):"undefined"!=typeof module&&module.exports?module.exports=s:t.skrollr=s}(window,document),FSS={FRONT:0,BACK:1,DOUBLE:2,SVGNS:"http://www.w3.org/2000/svg"},FSS.Array="function"==typeof Float32Array?Float32Array:Array,FSS.Utils={isNumber:function(t){return!isNaN(parseFloat(t))&&isFinite(t)}},function(){for(var t=0,e=["ms","moz","webkit","o"],i=0;e.length>i&&!window.requestAnimationFrame;++i)window.requestAnimationFrame=window[e[i]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[e[i]+"CancelAnimationFrame"]||window[e[i]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(e){var i=(new Date).getTime(),r=Math.max(0,16-(i-t)),n=window.setTimeout(function(){e(i+r)},r);return t=i+r,n}),window.cancelAnimationFrame||(window.cancelAnimationFrame=function(t){clearTimeout(t)})}(),Math.PIM2=2*Math.PI,Math.PID2=Math.PI/2,Math.randomInRange=function(t,e){return t+(e-t)*Math.random()},Math.clamp=function(t,e,i){return t=Math.max(t,e),t=Math.min(t,i)},FSS.Vector3={create:function(t,e,i){var r=new FSS.Array(3);return this.set(r,t,e,i),r},clone:function(t){var e=this.create();return this.copy(e,t),e},set:function(t,e,i,r){return t[0]=e||0,t[1]=i||0,t[2]=r||0,this},setX:function(t,e){return t[0]=e||0,this},setY:function(t,e){return t[1]=e||0,this},setZ:function(t,e){return t[2]=e||0,this},copy:function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],this},add:function(t,e){return t[0]+=e[0],t[1]+=e[1],t[2]+=e[2],this},addVectors:function(t,e,i){return t[0]=e[0]+i[0],t[1]=e[1]+i[1],t[2]=e[2]+i[2],this},addScalar:function(t,e){return t[0]+=e,t[1]+=e,t[2]+=e,this},subtract:function(t,e){return t[0]-=e[0],t[1]-=e[1],t[2]-=e[2],this},subtractVectors:function(t,e,i){return t[0]=e[0]-i[0],t[1]=e[1]-i[1],t[2]=e[2]-i[2],this},subtractScalar:function(t,e){return t[0]-=e,t[1]-=e,t[2]-=e,this},multiply:function(t,e){return t[0]*=e[0],t[1]*=e[1],t[2]*=e[2],this},multiplyVectors:function(t,e,i){return t[0]=e[0]*i[0],t[1]=e[1]*i[1],t[2]=e[2]*i[2],this},multiplyScalar:function(t,e){return t[0]*=e,t[1]*=e,t[2]*=e,this},divide:function(t,e){return t[0]/=e[0],t[1]/=e[1],t[2]/=e[2],this},divideVectors:function(t,e,i){return t[0]=e[0]/i[0],t[1]=e[1]/i[1],t[2]=e[2]/i[2],this},divideScalar:function(t,e){return 0!==e?(t[0]/=e,t[1]/=e,t[2]/=e):(t[0]=0,t[1]=0,t[2]=0),this},cross:function(t,e){var i=t[0],r=t[1],n=t[2];return t[0]=r*e[2]-n*e[1],t[1]=n*e[0]-i*e[2],t[2]=i*e[1]-r*e[0],this},crossVectors:function(t,e,i){return t[0]=e[1]*i[2]-e[2]*i[1],t[1]=e[2]*i[0]-e[0]*i[2],t[2]=e[0]*i[1]-e[1]*i[0],this},min:function(t,e){return e>t[0]&&(t[0]=e),e>t[1]&&(t[1]=e),e>t[2]&&(t[2]=e),this},max:function(t,e){return t[0]>e&&(t[0]=e),t[1]>e&&(t[1]=e),t[2]>e&&(t[2]=e),this},clamp:function(t,e,i){return this.min(t,e),this.max(t,i),this},limit:function(t,e,i){var r=this.length(t);return null!==e&&e>r?this.setLength(t,e):null!==i&&r>i&&this.setLength(t,i),this},dot:function(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]},normalise:function(t){return this.divideScalar(t,this.length(t))},negate:function(t){return this.multiplyScalar(t,-1)},distanceSquared:function(t,e){var i=t[0]-e[0],r=t[1]-e[1],n=t[2]-e[2];return i*i+r*r+n*n},distance:function(t,e){return Math.sqrt(this.distanceSquared(t,e))},lengthSquared:function(t){return t[0]*t[0]+t[1]*t[1]+t[2]*t[2]},length:function(t){return Math.sqrt(this.lengthSquared(t))},setLength:function(t,e){var i=this.length(t);return 0!==i&&e!==i&&this.multiplyScalar(t,e/i),this}},FSS.Vector4={create:function(t,e,i){var r=new FSS.Array(4);return this.set(r,t,e,i),r},set:function(t,e,i,r,n){return t[0]=e||0,t[1]=i||0,t[2]=r||0,t[3]=n||0,this},setX:function(t,e){return t[0]=e||0,this},setY:function(t,e){return t[1]=e||0,this},setZ:function(t,e){return t[2]=e||0,this},setW:function(t,e){return t[3]=e||0,this},add:function(t,e){return t[0]+=e[0],t[1]+=e[1],t[2]+=e[2],t[3]+=e[3],this},multiplyVectors:function(t,e,i){return t[0]=e[0]*i[0],t[1]=e[1]*i[1],t[2]=e[2]*i[2],t[3]=e[3]*i[3],this},multiplyScalar:function(t,e){return t[0]*=e,t[1]*=e,t[2]*=e,t[3]*=e,this},min:function(t,e){return e>t[0]&&(t[0]=e),e>t[1]&&(t[1]=e),e>t[2]&&(t[2]=e),e>t[3]&&(t[3]=e),this},max:function(t,e){return t[0]>e&&(t[0]=e),t[1]>e&&(t[1]=e),t[2]>e&&(t[2]=e),t[3]>e&&(t[3]=e),this},clamp:function(t,e,i){return this.min(t,e),this.max(t,i),this}},FSS.Color=function(t,e){this.rgba=FSS.Vector4.create(),this.hex=t||"#000000",this.opacity=FSS.Utils.isNumber(e)?e:1,this.set(this.hex,this.opacity)},FSS.Color.prototype={set:function(t,e){t=t.replace("#","");var i=t.length/3;return this.rgba[0]=parseInt(t.substring(0*i,1*i),16)/255,this.rgba[1]=parseInt(t.substring(1*i,2*i),16)/255,this.rgba[2]=parseInt(t.substring(2*i,3*i),16)/255,this.rgba[3]=FSS.Utils.isNumber(e)?e:this.rgba[3],this},hexify:function(t){var e=Math.ceil(255*t).toString(16);return 1===e.length&&(e="0"+e),e},format:function(){var t=this.hexify(this.rgba[0]),e=this.hexify(this.rgba[1]),i=this.hexify(this.rgba[2]);return this.hex="#"+t+e+i,this.hex}},FSS.Object=function(){this.position=FSS.Vector3.create()},FSS.Object.prototype={setPosition:function(t,e,i){return FSS.Vector3.set(this.position,t,e,i),this}},FSS.Light=function(t,e){FSS.Object.call(this),this.ambient=new FSS.Color(t||"#FFFFFF"),this.diffuse=new FSS.Color(e||"#FFFFFF"),this.ray=FSS.Vector3.create()},FSS.Light.prototype=Object.create(FSS.Object.prototype),FSS.Vertex=function(t,e,i){this.position=FSS.Vector3.create(t,e,i)},FSS.Vertex.prototype={setPosition:function(t,e,i){return FSS.Vector3.set(this.position,t,e,i),this}},FSS.Triangle=function(t,e,i){this.a=t||new FSS.Vertex,this.b=e||new FSS.Vertex,this.c=i||new FSS.Vertex,this.vertices=[this.a,this.b,this.c],this.u=FSS.Vector3.create(),this.v=FSS.Vector3.create(),this.centroid=FSS.Vector3.create(),this.normal=FSS.Vector3.create(),this.color=new FSS.Color,this.polygon=document.createElementNS(FSS.SVGNS,"polygon"),this.polygon.setAttributeNS(null,"stroke-linejoin","round"),this.polygon.setAttributeNS(null,"stroke-miterlimit","1"),this.polygon.setAttributeNS(null,"stroke-width","1"),this.computeCentroid(),this.computeNormal()},FSS.Triangle.prototype={computeCentroid:function(){return this.centroid[0]=this.a.position[0]+this.b.position[0]+this.c.position[0],this.centroid[1]=this.a.position[1]+this.b.position[1]+this.c.position[1],this.centroid[2]=this.a.position[2]+this.b.position[2]+this.c.position[2],FSS.Vector3.divideScalar(this.centroid,3),this},computeNormal:function(){return FSS.Vector3.subtractVectors(this.u,this.b.position,this.a.position),FSS.Vector3.subtractVectors(this.v,this.c.position,this.a.position),FSS.Vector3.crossVectors(this.normal,this.u,this.v),FSS.Vector3.normalise(this.normal),this}},FSS.Geometry=function(){this.vertices=[],this.triangles=[],this.dirty=!1},FSS.Geometry.prototype={update:function(){if(this.dirty){var t,e;for(t=this.triangles.length-1;t>=0;t--)e=this.triangles[t],e.computeCentroid(),e.computeNormal();this.dirty=!1}return this}},FSS.Plane=function(t,e,i,r){FSS.Geometry.call(this),this.width=t||100,this.height=e||100,this.segments=i||4,this.slices=r||4,this.segmentWidth=this.width/this.segments,this.sliceHeight=this.height/this.slices;var n,o,s,a,l,h,c,u=[],f=this.width*-.5,d=.5*this.height;for(n=0;this.segments>=n;n++)for(u.push([]),o=0;this.slices>=o;o++)c=new FSS.Vertex(f+n*this.segmentWidth,d-o*this.sliceHeight),u[n].push(c),this.vertices.push(c);for(n=0;this.segments>n;n++)for(o=0;this.slices>o;o++)s=u[n+0][o+0],a=u[n+0][o+1],l=u[n+1][o+0],h=u[n+1][o+1],t0=new FSS.Triangle(s,a,l),t1=new FSS.Triangle(l,a,h),this.triangles.push(t0,t1)},FSS.Plane.prototype=Object.create(FSS.Geometry.prototype),FSS.Material=function(t,e){this.ambient=new FSS.Color(t||"#444444"),this.diffuse=new FSS.Color(e||"#FFFFFF"),this.slave=new FSS.Color},FSS.Mesh=function(t,e){FSS.Object.call(this),this.geometry=t||new FSS.Geometry,this.material=e||new FSS.Material,this.side=FSS.FRONT,this.visible=!0},FSS.Mesh.prototype=Object.create(FSS.Object.prototype),FSS.Mesh.prototype.update=function(t,e){var i,r,n,o,s;if(this.geometry.update(),e)for(i=this.geometry.triangles.length-1;i>=0;i--){for(r=this.geometry.triangles[i],FSS.Vector4.set(r.color.rgba),n=t.length-1;n>=0;n--)o=t[n],FSS.Vector3.subtractVectors(o.ray,o.position,r.centroid),FSS.Vector3.normalise(o.ray),s=FSS.Vector3.dot(r.normal,o.ray),this.side===FSS.FRONT?s=Math.max(s,0):this.side===FSS.BACK?s=Math.abs(Math.min(s,0)):this.side===FSS.DOUBLE&&(s=Math.max(Math.abs(s),0)),FSS.Vector4.multiplyVectors(this.material.slave.rgba,this.material.ambient.rgba,o.ambient.rgba),FSS.Vector4.add(r.color.rgba,this.material.slave.rgba),FSS.Vector4.multiplyVectors(this.material.slave.rgba,this.material.diffuse.rgba,o.diffuse.rgba),FSS.Vector4.multiplyScalar(this.material.slave.rgba,s),FSS.Vector4.add(r.color.rgba,this.material.slave.rgba);FSS.Vector4.clamp(r.color.rgba,0,1)}return this},FSS.Scene=function(){this.meshes=[],this.lights=[]},FSS.Scene.prototype={add:function(t){return t instanceof FSS.Mesh&&!~this.meshes.indexOf(t)?this.meshes.push(t):t instanceof FSS.Light&&!~this.lights.indexOf(t)&&this.lights.push(t),this},remove:function(t){return t instanceof FSS.Mesh&&~this.meshes.indexOf(t)?this.meshes.splice(this.meshes.indexOf(t),1):t instanceof FSS.Light&&~this.lights.indexOf(t)&&this.lights.splice(this.lights.indexOf(t),1),this}},FSS.Renderer=function(){this.width=0,this.height=0,this.halfWidth=0,this.halfHeight=0},FSS.Renderer.prototype={setSize:function(t,e){return this.width!==t||this.height!==e?(this.width=t,this.height=e,this.halfWidth=.5*this.width,this.halfHeight=.5*this.height,this):void 0},clear:function(){return this},render:function(){return this}},FSS.CanvasRenderer=function(){FSS.Renderer.call(this),this.element=document.createElement("canvas"),this.element.style.display="block",this.context=this.element.getContext("2d"),this.setSize(this.element.width,this.element.height)},FSS.CanvasRenderer.prototype=Object.create(FSS.Renderer.prototype),FSS.CanvasRenderer.prototype.setSize=function(t,e){return FSS.Renderer.prototype.setSize.call(this,t,e),this.element.width=t,this.element.height=e,this.context.setTransform(1,0,0,-1,this.halfWidth,this.halfHeight),this},FSS.CanvasRenderer.prototype.clear=function(){return FSS.Renderer.prototype.clear.call(this),this.context.clearRect(-this.halfWidth,-this.halfHeight,this.width,this.height),this},FSS.CanvasRenderer.prototype.render=function(t){FSS.Renderer.prototype.render.call(this,t);var e,i,r,n,o;for(this.clear(),this.context.lineJoin="round",this.context.lineWidth=1,e=t.meshes.length-1;e>=0;e--)if(i=t.meshes[e],i.visible)for(i.update(t.lights,!0),r=i.geometry.triangles.length-1;r>=0;r--)n=i.geometry.triangles[r],o=n.color.format(),this.context.beginPath(),this.context.moveTo(n.a.position[0],n.a.position[1]),this.context.lineTo(n.b.position[0],n.b.position[1]),this.context.lineTo(n.c.position[0],n.c.position[1]),this.context.closePath(),this.context.strokeStyle=o,this.context.fillStyle=o,this.context.stroke(),this.context.fill();return this},FSS.WebGLRenderer=function(){FSS.Renderer.call(this),this.element=document.createElement("canvas"),this.element.style.display="block",this.vertices=null,this.lights=null;var t={preserveDrawingBuffer:!1,premultipliedAlpha:!0,antialias:!0,stencil:!0,alpha:!0};return this.gl=this.getContext(this.element,t),this.unsupported=!this.gl,this.unsupported?"WebGL is not supported by your browser.":(this.gl.clearColor(0,0,0,0),this.gl.enable(this.gl.DEPTH_TEST),void this.setSize(this.element.width,this.element.height))},FSS.WebGLRenderer.prototype=Object.create(FSS.Renderer.prototype),FSS.WebGLRenderer.prototype.getContext=function(t,e){var i=!1;try{if(!(i=t.getContext("experimental-webgl",e)))throw"Error creating WebGL context."}catch(r){console.error(r)}return i},FSS.WebGLRenderer.prototype.setSize=function(t,e){return FSS.Renderer.prototype.setSize.call(this,t,e),this.unsupported?void 0:(this.element.width=t,this.element.height=e,this.gl.viewport(0,0,t,e),this)},FSS.WebGLRenderer.prototype.clear=function(){return FSS.Renderer.prototype.clear.call(this),this.unsupported?void 0:(this.gl.clear(this.gl.COLOR_BUFFER_BIT|this.gl.DEPTH_BUFFER_BIT),this)},FSS.WebGLRenderer.prototype.render=function(t){if(FSS.Renderer.prototype.render.call(this,t),!this.unsupported){var e,i,r,n,o,s,a,l,h,c,u,f,d,m,p,g=!1,S=t.lights.length,v=0;if(this.clear(),this.lights!==S){if(this.lights=S,!(this.lights>0))return;this.buildProgram(S)}if(this.program){for(e=t.meshes.length-1;e>=0;e--)i=t.meshes[e],i.geometry.dirty&&(g=!0),i.update(t.lights,!1),v+=3*i.geometry.triangles.length;if(g||this.vertices!==v){this.vertices=v;for(l in this.program.attributes){for(c=this.program.attributes[l],c.data=new FSS.Array(v*c.size),d=0,e=t.meshes.length-1;e>=0;e--)for(i=t.meshes[e],r=0,n=i.geometry.triangles.length;n>r;r++)for(o=i.geometry.triangles[r],m=0,p=o.vertices.length;p>m;m++){switch(vertex=o.vertices[m],l){case"side":this.setBufferData(d,c,i.side);break;case"position":this.setBufferData(d,c,vertex.position);break;case"centroid":this.setBufferData(d,c,o.centroid);break;case"normal":this.setBufferData(d,c,o.normal);break;case"ambient":this.setBufferData(d,c,i.material.ambient.rgba);break;case"diffuse":this.setBufferData(d,c,i.material.diffuse.rgba)}d++}this.gl.bindBuffer(this.gl.ARRAY_BUFFER,c.buffer),this.gl.bufferData(this.gl.ARRAY_BUFFER,c.data,this.gl.DYNAMIC_DRAW),this.gl.enableVertexAttribArray(c.location),this.gl.vertexAttribPointer(c.location,c.size,this.gl.FLOAT,!1,0,0)}}for(this.setBufferData(0,this.program.uniforms.resolution,[this.width,this.height,this.width]),s=S-1;s>=0;s--)a=t.lights[s],this.setBufferData(s,this.program.uniforms.lightPosition,a.position),this.setBufferData(s,this.program.uniforms.lightAmbient,a.ambient.rgba),this.setBufferData(s,this.program.uniforms.lightDiffuse,a.diffuse.rgba);for(h in this.program.uniforms)switch(c=this.program.uniforms[h],f=c.location,u=c.data,c.structure){case"3f":this.gl.uniform3f(f,u[0],u[1],u[2]);break;case"3fv":this.gl.uniform3fv(f,u);break;case"4fv":this.gl.uniform4fv(f,u)}}return this.gl.drawArrays(this.gl.TRIANGLES,0,this.vertices),this}},FSS.WebGLRenderer.prototype.setBufferData=function(t,e,i){if(FSS.Utils.isNumber(i))e.data[t*e.size]=i;else for(var r=i.length-1;r>=0;r--)e.data[t*e.size+r]=i[r]},FSS.WebGLRenderer.prototype.buildProgram=function(t){if(!this.unsupported){var e=FSS.WebGLRenderer.VS(t),i=FSS.WebGLRenderer.FS(t),r=e+i;if(!this.program||this.program.code!==r){var n=this.gl.createProgram(),o=this.buildShader(this.gl.VERTEX_SHADER,e),s=this.buildShader(this.gl.FRAGMENT_SHADER,i);if(this.gl.attachShader(n,o),this.gl.attachShader(n,s),this.gl.linkProgram(n),!this.gl.getProgramParameter(n,this.gl.LINK_STATUS)){var a=this.gl.getError(),l=this.gl.getProgramParameter(n,this.gl.VALIDATE_STATUS);return console.error("Could not initialise shader.\nVALIDATE_STATUS: "+l+"\nERROR: "+a),null}return this.gl.deleteShader(s),this.gl.deleteShader(o),n.code=r,n.attributes={side:this.buildBuffer(n,"attribute","aSide",1,"f"),position:this.buildBuffer(n,"attribute","aPosition",3,"v3"),centroid:this.buildBuffer(n,"attribute","aCentroid",3,"v3"),normal:this.buildBuffer(n,"attribute","aNormal",3,"v3"),ambient:this.buildBuffer(n,"attribute","aAmbient",4,"v4"),diffuse:this.buildBuffer(n,"attribute","aDiffuse",4,"v4")},n.uniforms={resolution:this.buildBuffer(n,"uniform","uResolution",3,"3f",1),lightPosition:this.buildBuffer(n,"uniform","uLightPosition",3,"3fv",t),lightAmbient:this.buildBuffer(n,"uniform","uLightAmbient",4,"4fv",t),lightDiffuse:this.buildBuffer(n,"uniform","uLightDiffuse",4,"4fv",t)},this.program=n,this.gl.useProgram(this.program),n}}},FSS.WebGLRenderer.prototype.buildShader=function(t,e){if(!this.unsupported){var i=this.gl.createShader(t);return this.gl.shaderSource(i,e),this.gl.compileShader(i),this.gl.getShaderParameter(i,this.gl.COMPILE_STATUS)?i:(console.error(this.gl.getShaderInfoLog(i)),null)}},FSS.WebGLRenderer.prototype.buildBuffer=function(t,e,i,r,n,o){var s={buffer:this.gl.createBuffer(),size:r,structure:n,data:null};switch(e){case"attribute":s.location=this.gl.getAttribLocation(t,i);break;case"uniform":s.location=this.gl.getUniformLocation(t,i)}return o&&(s.data=new FSS.Array(o*r)),s},FSS.WebGLRenderer.VS=function(t){var e=["precision mediump float;","#define LIGHTS "+t,"attribute float aSide;","attribute vec3 aPosition;","attribute vec3 aCentroid;","attribute vec3 aNormal;","attribute vec4 aAmbient;","attribute vec4 aDiffuse;","uniform vec3 uResolution;","uniform vec3 uLightPosition[LIGHTS];","uniform vec4 uLightAmbient[LIGHTS];","uniform vec4 uLightDiffuse[LIGHTS];","varying vec4 vColor;","void main() {","vColor = vec4(0.0);","vec3 position = aPosition / uResolution * 2.0;","for (int i = 0; i < LIGHTS; i++) {","vec3 lightPosition = uLightPosition[i];","vec4 lightAmbient = uLightAmbient[i];","vec4 lightDiffuse = uLightDiffuse[i];","vec3 ray = normalize(lightPosition - aCentroid);","float illuminance = dot(aNormal, ray);","if (aSide == 0.0) {","illuminance = max(illuminance, 0.0);","} else if (aSide == 1.0) {","illuminance = abs(min(illuminance, 0.0));","} else if (aSide == 2.0) {","illuminance = max(abs(illuminance), 0.0);","}","vColor += aAmbient * lightAmbient;","vColor += aDiffuse * lightDiffuse * illuminance;","}","vColor = clamp(vColor, 0.0, 1.0);","gl_Position = vec4(position, 1.0);","}"].join("\n");return e},FSS.WebGLRenderer.FS=function(){var t=["precision mediump float;","varying vec4 vColor;","void main() {","gl_FragColor = vColor;","}"].join("\n");return t},FSS.SVGRenderer=function(){FSS.Renderer.call(this),this.element=document.createElementNS(FSS.SVGNS,"svg"),this.element.setAttribute("xmlns",FSS.SVGNS),this.element.setAttribute("version","1.1"),this.element.style.display="block",this.setSize(300,150)},FSS.SVGRenderer.prototype=Object.create(FSS.Renderer.prototype),FSS.SVGRenderer.prototype.setSize=function(t,e){return FSS.Renderer.prototype.setSize.call(this,t,e),this.element.setAttribute("width",t),this.element.setAttribute("height",e),this},FSS.SVGRenderer.prototype.clear=function(){FSS.Renderer.prototype.clear.call(this);for(var t=this.element.childNodes.length-1;t>=0;t--)this.element.removeChild(this.element.childNodes[t]);return this},FSS.SVGRenderer.prototype.render=function(t){FSS.Renderer.prototype.render.call(this,t);var e,i,r,n,o,s;for(e=t.meshes.length-1;e>=0;e--)if(i=t.meshes[e],i.visible)for(i.update(t.lights,!0),r=i.geometry.triangles.length-1;r>=0;r--)n=i.geometry.triangles[r],n.polygon.parentNode!==this.element&&this.element.appendChild(n.polygon),o=this.formatPoint(n.a)+" ",o+=this.formatPoint(n.b)+" ",o+=this.formatPoint(n.c),s=this.formatStyle(n.color.format()),n.polygon.setAttributeNS(null,"points",o),n.polygon.setAttributeNS(null,"style",s);return this},FSS.SVGRenderer.prototype.formatPoint=function(t){return this.halfWidth+t.position[0]+","+(this.halfHeight-t.position[1])},FSS.SVGRenderer.prototype.formatStyle=function(t){var e="fill:"+t+";";return e+="stroke:"+t+";"},!function(t){var e=/iPhone/i,i=/iPod/i,r=/iPad/i,n=/(?=.*\bAndroid\b)(?=.*\bMobile\b)/i,o=/Android/i,s=/(?=.*\bAndroid\b)(?=.*\bSD4930UR\b)/i,a=/(?=.*\bAndroid\b)(?=.*\b(?:KFOT|KFTT|KFJWI|KFJWA|KFSOWI|KFTHWI|KFTHWA|KFAPWI|KFAPWA|KFARWI|KFASWI|KFSAWI|KFSAWA)\b)/i,l=/IEMobile/i,h=/(?=.*\bWindows\b)(?=.*\bARM\b)/i,c=/BlackBerry/i,u=/BB10/i,f=/Opera Mini/i,d=/(CriOS|Chrome)(?=.*\bMobile\b)/i,m=/(?=.*\bFirefox\b)(?=.*\bMobile\b)/i,p=new RegExp("(?:Nexus 7|BNTV250|Kindle Fire|Silk|GT-P1000)","i"),g=function(t,e){return t.test(e)},S=function(t){var S=t||navigator.userAgent,v=S.split("[FBAN");return"undefined"!=typeof v[1]&&(S=v[0]),
this.apple={phone:g(e,S),ipod:g(i,S),tablet:!g(e,S)&&g(r,S),device:g(e,S)||g(i,S)||g(r,S)},this.amazon={phone:g(s,S),tablet:!g(s,S)&&g(a,S),device:g(s,S)||g(a,S)},this.android={phone:g(s,S)||g(n,S),tablet:!g(s,S)&&!g(n,S)&&(g(a,S)||g(o,S)),device:g(s,S)||g(a,S)||g(n,S)||g(o,S)},this.windows={phone:g(l,S),tablet:g(h,S),device:g(l,S)||g(h,S)},this.other={blackberry:g(c,S),blackberry10:g(u,S),opera:g(f,S),firefox:g(m,S),chrome:g(d,S),device:g(c,S)||g(u,S)||g(f,S)||g(m,S)||g(d,S)},this.sevenInch=g(p,S),this.any=this.apple.device||this.android.device||this.windows.device||this.other.device||this.sevenInch,this.phone=this.apple.phone||this.android.phone||this.windows.phone,this.tablet=this.apple.tablet||this.android.tablet||this.windows.tablet,"undefined"==typeof window?this:void 0},v=function(){var t=new S;return t.Class=S,t};"undefined"!=typeof module&&module.exports&&"undefined"==typeof window?module.exports=S:"undefined"!=typeof module&&module.exports&&"undefined"!=typeof window?module.exports=v():"function"==typeof define&&define.amd?define("isMobile",[],t.isMobile=v()):t.isMobile=v()}(this),function(t,e,i){"use strict";function r(t){return t.offsetTop+(t.offsetParent?r(t.offsetParent):0)}function n(t){this.el=t,this.image=this.el.previousElementSibling,this.currentFrame=0,this.totalFrames=90,this.path=[],this.length=[],this.handle=0,this.init()}function o(){var e=h.clientHeight||h.offsetHeight,i=t.innerHeight;return i>e?i:e}function s(){return t.pageYOffset||h.scrollTop}function a(t){var e=0,i=0;do isNaN(t.offsetTop)||(e+=t.offsetTop),isNaN(t.offsetLeft)||(i+=t.offsetLeft);while(t=t.offsetParent);return{top:e,left:i}}function l(t,e){var i=t.offsetHeight,r=s(),n=r+o(),l=a(t).top,h=l+i,e=e||0;return n>=l+i*e&&h>=r}var h=t.document.documentElement,c={iter:30,tm:null,stopShow:function(){clearTimeout(this.tm),this.iter=30},getRealTop:function(t){var e=t,i=0;do i+=e.offsetTop,e=e.offsetParent;while(e);return i},getPageScroll:function(){var i=t.pageYOffset||e.body.scrollTop||e.documentElement.scrollTop;return i},anim:function(i){this.stopShow();var n,o,s,a,l,h,u;return n=r(e.getElementById(i)),console.log(n),s=this.getRealTop(e.getElementById(i).parentNode),o=this.getPageScroll(),(null===o||isNaN(o)||"undefined"===o)&&(o=0),a=n-o,a>s&&(l=n-s-o,h=1),s>a&&(l=o+s-n,h=-1),a!==s&&(u=~~(l/4+1)*h,this.iter>1?this.iter-=1:this.iter=0,t.scrollBy(0,u),this.tm=t.setTimeout(function(){c.anim(i)},this.iter)),a===s?void this.stopShow():void 0}};t.requestAnimFrame=function(){return t.requestAnimationFrame||t.webkitRequestAnimationFrame||t.mozRequestAnimationFrame||t.oRequestAnimationFrame||t.msRequestAnimationFrame||function(e){t.setTimeout(e,1e3/60)}}(),t.cancelAnimFrame=function(){return t.cancelAnimationFrame||t.webkitCancelAnimationFrame||t.mozCancelAnimationFrame||t.oCancelAnimationFrame||t.msCancelAnimationFrame||function(e){t.clearTimeout(e)}}();var u={getRectLength:function(t){var e=t.getAttribute("width"),i=t.getAttribute("height");return 2*e+2*i},getPolygonLength:function(t){var e=t.getAttribute("points");e=e.split(" ");for(var i,r,n,o,s=null,a=null,l=0,h=0;h<e.length;h++){var c=e[h].split(",");null===s&&null===a?(/(\r\n|\n|\r)/gm.test(c[0])&&(c[0]=c[0].replace(/(\r\n|\n|\r)/gm,""),c[0]=c[0].replace(/\s+/g,"")),/(\r\n|\n|\r)/gm.test(c[1])&&(c[0]=c[1].replace(/(\r\n|\n|\r)/gm,""),c[0]=c[1].replace(/\s+/g,"")),s=c[0],a=c[1],n=c[0],o=c[1]):""!==c[0]&&""!==c[1]&&(/(\r\n|\n|\r)/gm.test(c[0])&&(c[0]=c[0].replace(/(\r\n|\n|\r)/gm,""),c[0]=c[0].replace(/\s+/g,"")),/(\r\n|\n|\r)/gm.test(c[1])&&(c[0]=c[1].replace(/(\r\n|\n|\r)/gm,""),c[0]=c[1].replace(/\s+/g,"")),i=c[0],r=c[1],l+=Math.sqrt(Math.pow(i-s,2)+Math.pow(r-a,2)),s=i,a=r,h===e.length-2&&(l+=Math.sqrt(Math.pow(n-s,2)+Math.pow(o-a,2))))}return l+10},getLineLength:function(t){var e=t.getAttribute("x1"),i=t.getAttribute("x2"),r=t.getAttribute("y1"),n=t.getAttribute("y2"),o=Math.sqrt(Math.pow(i-e,2)+Math.pow(n-r,2));return o},getCircleLength:function(t){var e=t.getAttribute("r"),i=2*Math.PI*e;return i},getPathLength:function(t){var e=t.getTotalLength();return e}};n.prototype.init=function(){var t=this;[].slice.call(t.el.children).forEach(function(e,i){t.path[i]=e;var r;"polygon"===e.tagName?r=u.getPolygonLength(t.path[i]):"path"===e.tagName?r=u.getPathLength(t.path[i]):"rect"===e.tagName?r=u.getRectLength(t.path[i]):"circle"===e.tagName&&(r=u.getCircleLength(t.path[i])),t.length[i]=r,t.path[i].style.strokeDasharray=r+" "+r,t.path[i].style.strokeDashoffset=r})},n.prototype.render=function(){this.rendered||(this.rendered=!0,this.draw())},n.prototype.draw=function(){var e=this,i=this.currentFrame/this.totalFrames;if(i>1)t.cancelAnimFrame(this.handle),this.showImage();else{this.currentFrame++;for(var r=0,n=this.path.length;n>r;r++)this.path[r].style.strokeDashoffset=Math.floor(this.length[r]*(1-i));this.handle=t.requestAnimFrame(function(){e.draw()})}},n.prototype.showImage=function(){var t=this.image,e=this.el;t.classList.add("show"),e.classList.add("hide")};var f={init:function(){this.services.init(),this.form.init(),isMobile.any||this.setupMapSVG.init(),this.polyBG.init(),this.navLinks.init(),(isMobile.any||h.clientWidth<540)&&this.setupMobileScroll.init()},services:{init:function(){var t=e.getElementById("services");t.classList.add("is-visible"),this.setSVGDashes(),this.scrollServices()},setSVGDashes:function(){function i(t,e){t.setAttribute("data-_box-150p","stroke-dasharray:"+Math.ceil(e)+"px; stroke-dashoffset:"+Math.ceil(e)+"px;"),t.setAttribute("data-_box-250p","stroke-dasharray:"+Math.ceil(e)+"px; stroke-dashoffset:0px;")}function r(e){e.forEach(function(e,n){"polygon"===e.tagName?i(e,u.getPolygonLength(e)):"path"===e.tagName?i(e,u.getPathLength(e)):"line"===e.tagName?i(e,u.getLineLength(e)):"circle"===e.tagName?i(e,u.getCircleLength(e)):"g"===e.tagName&&(t["eleArr"+n]=Array.prototype.slice.call(e.children),r(t["eleArr"+n]))})}var n=e.getElementById("house_scene"),o=Array.prototype.slice.call(n.children);r(o)},scrollServices:function(){function t(){var t=parseInt(r.style.height.replace("px","")),n=parseInt(e.documentElement.clientHeight||e.documentElement.outerHeight);i.style.marginTop=t-n+"px"}var i=e.querySelector(".js-main"),r=e.body;!isMobile.any&&h.clientWidth>540&&(r.classList.remove("no-skrolling"),r.classList.add("is-skrolling"),skrollr.init({constants:{box:"100p"}}),t())}},form:{init:function(){this.floatingLabels(),this.messageCount(),this.svgCheckboxes(),this.formSubmission()},floatingLabels:function(){function t(){var t=this.previousSibling;""!==this.value?t.classList.add(s):t.classList.remove(s)}function i(t){var e=this.previousSibling;"focus"===t.type?e.classList.add(o):e.classList.remove(o)}for(var r=e.querySelectorAll(".input"),n=Array.prototype.slice.call(r),o="is-active",s="is-visible",a=0;a<n.length;a++)n[a].addEventListener("keyup",t,!1),n[a].addEventListener("focus",i,!1),n[a].addEventListener("blur",i,!1)},messageCount:function(){function t(){n=this.value.length,o=r-n,s.innerHTML=o,15>=o?a.classList.add("has-error"):a.classList.remove("has-error")}var i=e.getElementById("message"),r=parseInt(i.getAttribute("maxlength")),n=0,o=0,s=e.querySelector(".js-character-count"),a=e.querySelector(".js-character-element");i.addEventListener("keyup",t,!1),i.addEventListener("blur",t,!1)},svgCheckboxes:function(){if(e.createElement("svg").getAttributeNS){var t=Array.prototype.slice.call(e.querySelectorAll('.checkbox-labels input[type="checkbox"]')),i=["M16.667,62.167c3.109,5.55,7.217,10.591,10.926,15.75 c2.614,3.636,5.149,7.519,8.161,10.853c-0.046-0.051,1.959,2.414,2.692,2.343c0.895-0.088,6.958-8.511,6.014-7.3 c5.997-7.695,11.68-15.463,16.931-23.696c6.393-10.025,12.235-20.373,18.104-30.707C82.004,24.988,84.802,20.601,87,16"],r={speed:.2,easing:"ease-in-out"},n=function(t){var i=e.createElementNS("http://www.w3.org/2000/svg","svg");return t?(i.setAttributeNS(null,"viewBox",t.viewBox),i.setAttributeNS(null,"preserveAspectRatio",t.preserveAspectRatio)):i.setAttributeNS(null,"viewBox","0 0 100 100"),i.setAttribute("xmlns","http://www.w3.org/2000/svg"),i},o=function(t,e){var i=n(e);t.parentNode.appendChild(i),t.addEventListener("change",function(){t.checked?s(t):a(t)})};t.forEach(function(t){o(t)});var s=function(t){var n,o,s=[],a=t.parentNode.querySelector("svg");n=i,o=r,s.push(e.createElementNS("http://www.w3.org/2000/svg","path"));for(var l=0,h=s.length;h>l;++l){var c=s[l];a.appendChild(c),c.setAttributeNS(null,"d",n[l]);var u=c.getTotalLength();c.style.strokeDasharray=u+" "+u,0===l?c.style.strokeDashoffset=Math.floor(u)-1:c.style.strokeDashoffset=u,c.getBoundingClientRect(),c.style.transition=c.style.WebkitTransition=c.style.MozTransition="stroke-dashoffset "+o.speed+"s "+o.easing+" "+l*o.speed+"s",c.style.strokeDashoffset="0"}},a=function(t){Array.prototype.slice.call(t.parentNode.querySelectorAll("svg > path")).forEach(function(t){t.parentNode.removeChild(t)})}}},formSubmission:function(){function t(t){r.classList.remove(t),n.innerHTML="Send & Get Started"}var i=e.querySelector(".js-contact-form"),r=e.querySelector(".js-submit-button"),n=e.querySelector(".js-submit-content");i.addEventListener("submit",function(e){r.classList.add("is-loading"),r.setAttribute("disabled",""),n.innerHTML="Sending Message...";var o=new FormData(i),s=new XMLHttpRequest;s.open("POST","assets/includes/send_mail.php",!0),s.onload=function(){r.classList.remove("is-loading"),200===s.status?(r.classList.add("is-successful"),n.innerHTML="Message Sent!",r.removeAttribute("disabled"),setTimeout(function(){t("is-successful")},1500)):(r.classList.add("has-error"),n.innerHTML="Message Sending Failed. Please Try Again.",r.removeAttribute("disabled"),setTimeout(function(){t("has-error")},1500))},s.send(o),e.preventDefault()},!1)}},setupMapSVG:{init:function(){var i,r=e.querySelector(".map"),o=e.getElementById("mapSVG"),s=!1,a=new n(o);setTimeout(function(t){return function(){l(t.parentNode)&&a.render()}}(o),250),r.style.height=(o.clientHeight||o.outerHeight)+"px";var h=function(){s||(s=!0,setTimeout(function(){c()},60))},c=function(){l(o.parentNode,.5)&&a.render(),s=!1},u=function(){function t(){c(),i=null}i&&clearTimeout(i),r.style.height=(o.clientHeight||o.offsetHeight)+"px",i=setTimeout(t,200)};t.addEventListener("scroll",h,!1),t.addEventListener("resize",u,!1)}},polyBG:{init:function(){function i(){f.add(g),f.add(d),l.appendChild(h.element),r(),n(),h.render(f),t.addEventListener("resize",o,!1)}function r(){var t,e;for(t=p.vertices.length-1;t>=0;t--)e=p.vertices[t],e.anchor=FSS.Vector3.clone(e.position),e.step=FSS.Vector3.create(Math.randomInRange(.2,1),Math.randomInRange(.2,1),Math.randomInRange(.2,1)),e.time=Math.randomInRange(0,Math.PIM2)}function n(){var t,e,i,r,n,o=5;for(t=p.vertices.length-1;t>=0;t--)e=p.vertices[t],i=Math.sin(e.time+e.step[0]*a*.001),r=Math.cos(e.time+e.step[1]*a*.001),n=Math.sin(e.time+e.step[2]*a*.001),FSS.Vector3.set(e.position,.2*p.segmentWidth*i,.1*p.sliceHeight*r,.7*o*n-o),FSS.Vector3.add(e.position,e.anchor);p.dirty=!0}function o(){h.setSize(l.offsetWidth,l.offsetHeight)}function s(){a=Date.now()-S,d.setPosition(300*Math.sin(.001*a),200*Math.cos(5e-4*a),60),isMobile.any||n(),h.render(f),requestAnimationFrame(s)}var a,l=e.getElementById("scene"),h=new FSS.CanvasRenderer,c=l.clientWidth+100,u=(l.clientHeight||l.outerHeight)-60,f=new FSS.Scene,d=new FSS.Light("#b10e1b","#fad446"),m=new FSS.Material("#DD2F32","#ffffff"),p=new FSS.Plane(c,u,10,6,m),g=new FSS.Mesh(p,m),S=Date.now();i(),o(),s()}},navLinks:{init:function(){for(var t=Array.prototype.slice.call(e.querySelectorAll("nav a")),i=0;i<t.length;i++)t[i].addEventListener("click",f.navLinks.bindClick,!1)},bindClick:function(t){c.anim(this.getAttribute("href").replace("#","")),t.preventDefault()}},setupMobileScroll:{init:function(){for(var t=["design","develop","market","iterate"],i=0;i<t.length;i++){var r=e.querySelector("#"+t[i]+"_house"),n=e.querySelector(".js-"+t[i]),o=n.querySelector("h4");n.insertBefore(r,o)}}}};t.addEventListener("DOMContentLoaded",function(){f.init()},!1)}(window,document);